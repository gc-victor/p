var m=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";m||(window.process={env:{TEST:!1}});var u=process.env.TEST?!1:m;function g(a,...n){let _="",t=0,v=n.length;for(;t<v;){if(u)_+=a[t]+n[t];else{let e=/on\w+="$/.test(a[t]),l=typeof n[t]=="function",o=e?a[t].replace(/on(\w+)="$/,`data-_on_="" data-_fn_${t}="${n[t]}" data-_ev_${t}="$1" data-_arg_${t}="`):a[t],s=l?e?`${t}`:n[t]():n[t]instanceof Element?`<span data-_replace_='${t}'></span>`:n[t];_+=o+s}t++}if(_+=a[a.length-1],u)return _.replace(/\son\w+=".*?"/gm,"").replace(/>[\r\n ]+</g,"><").replace(/(<.*?>)|\s+/g,(e,l)=>l||" ").trim();let h=document.createElement("template");h.innerHTML=_;let c=h.content,d=0,f=[...c.querySelectorAll("[data-_replace_]")],y=f.length;for(;d<y;){let e=f[d];e.parentNode.replaceChild(n[e.getAttribute("data-_replace_")],e),d++}let r=0,i=[...c.querySelectorAll("[data-_on_]")],A=i.length;for(;r<A;){let e=i[r];Object.keys(i[r].dataset).forEach(l=>{if(/^_ev_/.test(l)){let o=l.replace("_ev_",""),s=e.getAttribute(`data-_ev_${o}`),b=n[e.getAttribute(`data-_arg_${o}`)];e.__key__=e.getAttribute("key"),e.__handler__=e.__handler__||{},e.__handler__[s]=b,e.addEventListener(s,b),e.removeAttribute("data-_on_"),e.removeAttribute(`data-_fn_${o}`),e.removeAttribute(`data-_arg_${o}`),e.removeAttribute(`data-_ev_${o}`)}}),e.removeAttribute("key"),r++}let p=0,$=[...c.querySelectorAll("[key]")].length;for(;p<$;){let e=i[p];e.__key__=e.getAttribute("key"),e.removeAttribute("key"),p++}return c.children[0]}var E=g;export{E as default};
