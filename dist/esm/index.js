function T(o){o.currentTarget.__handler__[o.type](o)}function j(o,c,d,p){let N=document.activeElement,m=document.body,g=o.length,h=c.length,u=g,r=0,n=0,s=[],i=[];for(;r<h||n<u;)if(h===r)for(;n<u;){let e=o[n],t=e.parentNode,l=p.indexOf(t);l!==-1&&(d[l].insertBefore(e,c[r]),s.push(e)),n++}else if(u===n)for(;r<h;){let e=c[r],t=e.parentNode,l=d.includes(e);t&&!l&&(t.removeChild(e),i.push(e)),r++}else if(c[r].isEqualNode(o[n]))r++,n++;else if(c[h-1].isEqualNode(o[u-1]))h--,u--;else{let e=c[r],t=o[n],l=e.parentNode,E=t.parentNode,v=s.includes(E),C=i.includes(l),f=d.includes(e),_=p.includes(t),x=e.tagName===t.tagName,P=Boolean(l&&l.parentNode);if(!v||!C||f&&_)if(!f&&!_&&x&&P&&!s.includes(E.parentNode))!p.includes(E)&&!d.includes(l)&&!m.contains(E)?(l.parentNode.replaceChild(E,l),s.push(E),s.push(t),i.push(l),i.push(e)):m.contains(t)||(l.replaceChild(t,e),s.push(t),i.push(e)),r++,n++;else if(f&&_&&x){let L=e.attributes,b=t.attributes,O=L.length,q=b.length,B=Object.keys(b);for(let a=O-1;a>=0;a--){let y=L[a].name;!B.includes(y)&&y!=="type"&&e.removeAttribute(y)}for(let a=0;a<q;a++){let y=b[a].name,A=b[a].value;e.setAttribute(y,A)}if(!e.__handler__&&t.__handler__){let a=Object.keys(t.__handler__||{}),y=a.length;for(let A=0;A<y;A++)t.removeEventListener(a[A],T),e.addEventListener(a[A],T)}e===N&&!t.children.length&&t.childNodes.length&&t.childNodes[0].nodeType===3&&(e.textContent=t.textContent),e.__handler__=t.__handler__,s.push(t),i.push(e),r++,n++}else!f&&_?n++:f&&!_?r++:(r++,n++);else v&&!C?n++:!v&&C?r++:f&&!_&&m.contains(t)?n++:f&&!_&&!m.contains(t)?(l.insertBefore(t,e),s.push(t),n++):!f&&_?(l.removeChild(e),i.push(e),r++):!_&&!f&&P?(l.replaceChild(t,e),s.push(t),i.push(e),r++,n++):(r++,n++)}}function k(o,c,d){let p=u(o),N=u(c),m=r(p[0],d),g=N.find(n=>{let s=d.__key__,i=n.__key__,e=d.getAttribute("name"),t=n.getAttribute("name");return s&&i&&s===i||e&&t&&e===t||!s&&d.isEqualNode(n)}),h=g&&r(N[0],g);return{p,n:N,pAncestry:m,nActiveElement:g,nAncestry:h};function u(n){let s=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT),i=[],e=s.currentNode;for(;e;)i.push(e),e=s.nextNode();return i}function r(n,s){let i=[];for(;s&&s!==n;){let e=s;i.push(e),s=e.parentNode}return i.push(n),i}}function w(o,c){if(!c)return o.parentNode.removeChild(o),c;let d=o.parentNode,p=document.activeElement;if(p&&p.tagName!=="BODY"&&o.contains(p)){let{p:N,n:m,pAncestry:g,nActiveElement:h,nAncestry:u}=k(o,c,p);if(!h)d.replaceChild(c,o);else return j(m,N,g,u),o}else d.replaceChild(c,o);return c}var K=w,z=K;export{z as default};
